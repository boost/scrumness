.row
  .small-10.columns
    %h1
      = @project.name
    = @project.description
  
  .small-2.columns
    .button.radius Filter

.row
  .small-1.large-centered.columns
    %h3 Rating

.row
  #sprint-graph-div
  / {:style => "width:100%;height:300px;"}

.row
  .small-1.large-centered.columns
    %h3 Velocity

.row
  #velocity-graph-div
  / {:style => "width:100%;height:300px;"}


#sprint-graph{"data-points" => @project.sprint_graph.to_json}
#velocity-graph{"data-points" => @project.velocity_graph.to_json}


%script{:src => "https://www.google.com/jsapi", :type => "text/javascript"}
:javascript
  google.load('visualization', '1.1', {packages: ['line', 'corechart']});
  google.setOnLoadCallback(drawChart);
  google.setOnLoadCallback(drawVelocityChart);

  function drawChart() {
    var graph = $('#sprint-graph');
    var graph_data = JSON.parse($('#sprint-graph').attr('data-points')); 
    var chartDiv = document.getElementById('sprint-graph-div');
    var data = new google.visualization.DataTable();

    data.addColumn('string', 'Sprint End Date');
    data.addColumn('number', "PO");
    data.addColumn('number', "Team");
    data.addColumn('number', "Combined");
    data.addColumn({type:'string', role:'annotation'});
    data.addColumn({type:'string', role:'annotationText'});

    data.addRows(graph_data)

    var classicOptions = {
      //title: 'Average Temperatures and Daylight in Iceland Throughout the Year',
      curveType: 'function',
      width: "100%",
      height: 500,
      pointSize: 7,
      // Gives each series an axis that matches the vAxes number below.
      series: {
        0: {targetAxisIndex: 0},
        1: {targetAxisIndex: 1}
      },
      vAxes: {
        // Adds titles to each axis.
        0: {title: 'Sprint Rating'},
        1: {title: 'Sprint Rating'}
      },
      hAxis: {
        //ticks: [new Date(2014, 0), new Date(2014, 1), new Date(2014, 2), new Date(2014, 3),
          //      new Date(2014, 4),  new Date(2014, 5), new Date(2014, 6), new Date(2014, 7),
            //    new Date(2014, 8), new Date(2014, 9), new Date(2014, 10), new Date(2014, 11),
              //  new Date(2015, 0)
               //]
      },
      vAxis: {
        viewWindow: {
          max: 10
        }
      }
    };

    function drawClassicChart() {
      var classicChart = new google.visualization.LineChart(chartDiv);
      classicChart.draw(data, classicOptions);
    }

    drawClassicChart();
  }

  google.load('visualization', '1.1', {packages: ['line', 'corechart']});
  google.setOnLoadCallback(drawVelocityChart);

  function drawVelocityChart() {
    var graph = $('#velocity-graph');
    var graph_data = JSON.parse($('#velocity-graph').attr('data-points')); 
    var chartDiv = document.getElementById('velocity-graph-div');
    var data = new google.visualization.DataTable();

    data.addColumn('string', 'Sprint End Date');
    data.addColumn('number', "Planned");
    data.addColumn('number', "Acheived");

    console.log(graph_data);

    data.addRows(graph_data)

    var classicOptions = {
      //title: 'Average Temperatures and Daylight in Iceland Throughout the Year',
      curveType: 'function',
      width: "100%",
      height: 500,
      pointSize: 7,
      // Gives each series an axis that matches the vAxes number below.
      series: {
        0: {targetAxisIndex: 0},
        1: {targetAxisIndex: 1}
      },
      vAxes: {
        // Adds titles to each axis.
        0: {title: 'Velocity'},
        1: {title: 'Velocity'}
      },
      hAxis: {
        //ticks: [new Date(2014, 0), new Date(2014, 1), new Date(2014, 2), new Date(2014, 3),
          //      new Date(2014, 4),  new Date(2014, 5), new Date(2014, 6), new Date(2014, 7),
            //    new Date(2014, 8), new Date(2014, 9), new Date(2014, 10), new Date(2014, 11),
              //  new Date(2015, 0)
               //]
      },
      vAxis: {
        viewWindow: {
          max: 100
        }
      }
    };

    function drawClassicChart() {
      var classicChart = new google.visualization.LineChart(chartDiv);
      classicChart.draw(data, classicOptions);
    }

    drawClassicChart();
  }
